<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="imagex/png" href="./assets/imagens/logo.png">
    <title>Filmes</title>
    <link rel="stylesheet" href="./css/jogo.css">
</head>

<body>
    <!-- header -->
    <div class="header">
        <div class="container">
            <h1 class="nome">Assemble</h1>
            <ul class="navegacao">
                <li> <a href="index.html">Home</a></li>
                <li> <a href="./dashboard/dashboard.html">Ranking</a></li>
                <li> <a href="index.html">Sair</a></li>
                
            </ul>
        </div>
    </div>

        <div id="div_estalo"  style="position: fixed; display: none;">
         <img src="./assets/imagens/thanos.gif" alt="">
        </div>

    <!-- fundo  -->
    <div class="fundo">
        <div class="textoImagens">
            Selecione os filmes que já assistiu
        </div>
        <div class="container"> 
            <div class="caixaImagens"> 
                <div class="caixa">
                    <button class="filmes" onclick="somar()"  href=""><img src="./assets/jogo/ironman1.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/im2.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/thor1.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/capitao1.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/avg1.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/ironman3.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/capitao22.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/guardioes1.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/avg2.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/am1.jpg" alt=""></button>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="caixaImagens2">
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/capitao2.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/strange1.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/gg2.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/ha1.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/thor3.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/pantera1.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/avg3.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/am2.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/capita1.jpg" alt=""></button>
                </div>
                <div class="caixa">
                    <button class="filmes" onclick="somar()"><img src="./assets/jogo/avg4.jpg" alt=""></button>
                </div>
            </div>
        </div>
    


    <div class="container">
        <div class="caixaImagens3">
            <div class="caixa">
                <button class="filmes" onclick="somar()"><img src="./assets/jogo/ha2.jpg" alt=""></ >
            </div>
            <div class="caixa">
                <button class="filmes" onclick="somar()"><img src="./assets/jogo/vn1.jpg" alt=""></button>
            </div>
            <div class="caixa">
                <button class="filmes" onclick="somar()"><img src="./assets/jogo/shangchi.jpeg" alt=""></button>
            </div>
            <div class="caixa">
                <button class="filmes" onclick="somar()"><img src="./assets/jogo/eternos.jpg" alt=""></button>
            </div>
            <div class="caixa">
                <button class="filmes" onclick="somar()"><img src="./assets/jogo/ha3.jpeg" alt=""></button>
            </div>
            <div class="caixa">
                <button class="filmes" onclick="somar()"><img src="./assets/jogo/strange2.jpeg" alt=""></button>
            </div>
            <div class="caixa">
                <button class="filmes" onclick="somar()"><img src="./assets/jogo/thor4.jpg" alt=""></button>
            </div>
            <div class="caixa">
                <button class="filmes" onclick="somar()"><img src="./assets/jogo/pantera2.jpg" alt=""></button>
            </div>
            <div class="caixa">
                <button class="filmes" onclick="somar()"><img src="./assets/jogo/am3.jpg" alt=""></button>
            </div>
            <div class="caixa">
                <button class="filmes" onclick="somar()"><img src="./assets/jogo/gg3.jpg" alt=""></button>
            </div>
        </div>
    </div>
    <button class="botaoValidar" onclick="conferir()">Conferir</button>  
</div>
</body>

</html> 

<script>
    var filmesAssistidos = Number();
    function somar() {
        filmesAssistidos = filmesAssistidos + 1
    }

    function conferir() {
            fetch(`/usuarios/conferir/${filmesAssistidos}/${sessionStorage.ID_USUARIO}`, {
            method: "POST",
            headers: {  
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                idUsuarioServer : sessionStorage.ID_USUARIO,
                FilmesServer: sessionStorage.filmesAssistidos

            
            })
        }).then(function (resposta) {

            console.log("resposta: ", resposta);

            /* sessionStorage.QTD_FILMES = json.qtdFilmes */

            if (resposta.ok) {
                setTimeout(() => { 
                    window.location.href = "./dashboard/dashboard.html"
                    
                }, "1200")
                
                div_estalo.style.display = "flex"
            } else {
                throw ("Houve um erro ao tentar realizar o cadastro!");
            } 
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
        });
        
        
        return false;
        }

        
    
</script>